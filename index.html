<!DOCTYPE html>
<html>
  <head>
    <title>tik-tak-toe</title>
    <style>
      .tableContainer {
        width: 50px;
        height: auto;
        margin-left: 465px;
        margin-top: 80px;
      }
      .tableData {
        padding: 50px 50px 50px 50px;
        background-color: lightgrey;
        font-weight: bold;
      }
      .para {
        border-radius: 25px;
        border: 1px solid black;
        text-align: center;
        width: 200px;
        height: auto;
        background-color: limegreen;
      }
    </style>
    <script>
      const winningPositions = [
        [1, 2, 3],
        [4, 5, 6],
        [7, 8, 9],
        [1, 5, 9],
        [3, 5, 7],
        [1, 4, 7],
        [2, 5, 8],
        [3, 6, 9]
      ];
      let currentPlayerNumber = 1;
      let currentPlayerSymbol = '';
      let playersWinningChances = {'0': [], '1': []};
      const players = ['X', '0'];
      winningStatus = {'0': false, '1': false};

      const updateCurrentPlayer = function(player) {
        currentPlayerNumber = +!currentPlayerNumber;
        currentPlayerSymbol = players[currentPlayerNumber];
      };
      const isCurrentPlayerWon = function(player, position) {
        playersWinningChances[player].push(+position);
        for (let i = 0; i < winningPositions.length; i++) {
          winningStatus[player] =
            winningStatus[player] || isSubsetOf(winningPositions[i], player);
          if (winningStatus[player]) return winningStatus;
        }
      };

      const isSubsetOf = function(winningPos, playerNumber) {
        const playerPos = playersWinningChances[playerNumber];
        for (let i = 0; i < winningPos.length; i++) {
          if (playerPos.indexOf(winningPos[i]) == -1) {
            return false;
          }
        }
        return true;
      };

      const isBoardFilled = function() {
        filledBoxesCount = playersWinningChances['0'].concat(
          playersWinningChances['1']
        ).length;
        return filledBoxesCount === 9;
      };

      const putData = function(event, position) {
        updateCurrentPlayer();
        event.toElement.innerText = currentPlayerSymbol;
        const playerDone = `player${currentPlayerNumber + 1}:Done`;
        document.getElementById('player').innerHTML = playerDone;
        if (isCurrentPlayerWon(currentPlayerNumber, position)) {
          alert(`hey Player: ${currentPlayerNumber + 1} WON`);
          document.getElementById('board').style.display = 'none';
          return;
        }
        if (isBoardFilled()) {
          alert(`Match draw`);
          document.getElementById('board').style.display = 'none';
        }
      };
    </script>
  </head>
  <body>
    <div style="text-align: center;margin-bottom:-10px">
      <img
        src="tic-tak-toe-logo.jpeg"
        alt="not found"
        style="margin-bottom:-50px ;"
      />
    </div>
    <div class="tableContainer" id="board">
      <table border="1" style="width: 348px;height: 352px;">
        <tr>
          <td class="tableData" onclick="putData(event,this.id)" id="1"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="2"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="3"></td>
        </tr>
        <tr>
          <td class="tableData" onclick="putData(event,this.id)" id="4"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="5"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="6"></td>
        </tr>
        <tr>
          <td class="tableData" onclick="putData(event,this.id)" id="7"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="8"></td>
          <td class="tableData" onclick="putData(event,this.id)" id="9"></td>
        </tr>
      </table>
    </div>
    <br />
    <div style="display: flex;justify-content: center;">
      <p class="para" id="player">Turn: player1</p>
    </div>
  </body>
</html>
